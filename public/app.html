<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tableau de bord â€“ MyMÃ­r</title>
  <link rel="icon" type="image/png" href="assets/logo/favicon.png" />
  <link rel="stylesheet" href="css/app.css" />
  <script defer src="js/app.js"></script>
</head>
<body>

  <!-- === SIDEBAR === -->
  <aside class="sidebar">
    <div class="logo-area">
      <img src="assets/logo/favicon.png" alt="MyMÃ­r Logo" class="logo-img">
      <span class="logo-text">MyMÃ­r</span>
    </div>
    <nav>
      <a href="#" class="active" data-page="dashboard">ğŸ  Accueil</a>
      <a href="#" data-page="analyse">ğŸ“„ Analyse</a>
      <a href="#" data-page="aide">ğŸ’¡ Aide Ã  la rÃ©ponse</a>
      <a href="#" data-page="historique">ğŸ•“ Historique</a>
      <a href="#" data-page="profil">ğŸ‘¤ Profil</a>
    </nav>
  </aside>

  <!-- === MAIN CONTENT === -->
  <main class="main">
    <header class="topbar">
      <h1 id="pageTitle">Dashboard</h1>
      <div class="user-info">
        <span id="userName">Entreprise DÃ©mo</span>
        <button id="logoutBtn">DÃ©connexion</button>
      </div>
    </header>

    <!-- === CONTENU DYNAMIQUE === -->
    <section id="contentArea">

<!-- ğŸŸ¡ Tableau de bord par dÃ©faut -->
<div id="dashboard" class="welcome visible">
  <h2>Bienvenue sur votre tableau de bord</h2>
  <p>SÃ©lectionnez un module pour commencer votre analyse.</p>

  <div class="stats-container">
    <div class="stat-card fade-in">
      <h3>ğŸ“Š Analyses rÃ©alisÃ©es</h3>
      <p>12</p>
    </div>
    <div class="stat-card fade-in">
      <h3>ğŸ§  Recommandations IA</h3>
      <p>36</p>
    </div>
    <div class="stat-card fade-in">
      <h3>ğŸ—ï¸ Appels dâ€™offres suivis</h3>
      <p>8</p>
    </div>
  </div>

  <!-- === ğŸ” SIMULATION IA === -->
  <div class="ai-section">
    <h3>Analyse intelligente (version dÃ©mo)</h3>
    <p>DÃ©posez un fichier pour lancer une simulation dâ€™analyse.</p>

    <form id="aiForm">
      <input type="file" id="aiFile" accept=".pdf,.doc,.docx" />
      <button type="submit">Lancer lâ€™analyse IA</button>
    </form>

    <div id="aiResult" class="ai-result hidden">
      <div id="aiLoading" class="ai-loading">
        <div class="spinner"></div>
        <p>MyMÃ­r rÃ©flÃ©chit Ã  votre document...</p>
      </div>

      <div id="aiOutput" class="ai-output hidden">
        <h4>RÃ©sultat de lâ€™analyse :</h4>
        <ul>
          <li><strong>Type dâ€™appel dâ€™offre :</strong> MarchÃ© public â€“ Fournitures</li>
          <li><strong>Date limite :</strong> 18 novembre 2025</li>
          <li><strong>Documents requis :</strong> DC1, DC2, mÃ©moire technique</li>
          <li><strong>Niveau de risque :</strong> ModÃ©rÃ©</li>
        </ul>
      </div>
    </div>
  </div>
</div>

      <!-- ğŸ‘¤ Page Profil -->
      <div id="profil" class="profil-page hidden">
        <h2>Profil de votre entreprise</h2>
        <div class="profil-info">
          <p><strong>Nom de lâ€™entreprise :</strong> <span id="pCompany"></span></p>
          <p><strong>Responsable :</strong> <span id="pManager"></span></p>
          <p><strong>Email :</strong> <span id="pEmail"></span></p>
          <p><strong>Secteur dâ€™activitÃ© :</strong> <span id="pSector"></span></p>
          <p><strong>Chiffre dâ€™affaires :</strong> <span id="pRevenue"></span></p>
          <p><strong>Effectif :</strong> <span id="pEmployees"></span></p>
          <p><strong>Pays / rÃ©gion principale :</strong> <span id="pCountry"></span></p>
          <p><strong>Certifications :</strong> <span id="pCertifications"></span></p>
        </div>
      </div>

    </section>
  </main>

  <script>
    // === VÃ©rifie la connexion ===
    const user = JSON.parse(localStorage.getItem("myMirUser"));
    if (!user) {
      window.location.href = "login.html";
    } else {
      document.getElementById("userName").textContent = user.company;
    }

    // === DÃ©connexion ===
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("myMirUser");
      alert("DÃ©connexion rÃ©ussie !");
      window.location.href = "login.html";
    });

    // === Navigation dynamique ===
    const links = document.querySelectorAll(".sidebar nav a");
    const sections = document.querySelectorAll("#contentArea > div");

    links.forEach(link => {
      link.addEventListener("click", () => {
        links.forEach(l => l.classList.remove("active"));
        link.classList.add("active");
        const page = link.dataset.page;

        sections.forEach(sec => sec.classList.add("hidden"));
        document.getElementById(page).classList.remove("hidden");

        if (page === "dashboard") {
          document.getElementById("pageTitle").textContent = "Dashboard";
        } else if (page === "profil") {
          document.getElementById("pageTitle").textContent = "Profil";
          loadProfil();
        } else {
          document.getElementById("pageTitle").textContent = link.textContent.trim();
        }
      });
    });

    // === Remplit la page profil avec les donnÃ©es locales ===
    function loadProfil() {
      document.getElementById("pCompany").textContent = user.company;
      document.getElementById("pManager").textContent = user.manager;
      document.getElementById("pEmail").textContent = user.email;
      document.getElementById("pSector").textContent = user.sector;
      document.getElementById("pRevenue").textContent = user.revenue;
      document.getElementById("pEmployees").textContent = user.employees;
      document.getElementById("pCountry").textContent = user.country;
      document.getElementById("pCertifications").textContent = user.certifications;
    }
    // === IA Simulation ===
const aiForm = document.getElementById("aiForm");
const aiResult = document.getElementById("aiResult");
const aiLoading = document.getElementById("aiLoading");
const aiOutput = document.getElementById("aiOutput");

if (aiForm) {
  aiForm.addEventListener("submit", e => {
    e.preventDefault();
    aiResult.classList.remove("hidden");
    aiLoading.classList.remove("hidden");
    aiOutput.classList.add("hidden");

    // Simulation d'analyse
    setTimeout(() => {
      aiLoading.classList.add("hidden");
      aiOutput.classList.remove("hidden");
    }, 3000);
  });
}
  </script>

</body>
</html>
